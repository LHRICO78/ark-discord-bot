{
    "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PTERODACTYL PANEL - PTERODACTYL.IO",
    "meta": {
        "version": "PTDL_v2",
        "update_url": null
    },
    "exported_at": "2025-10-23T08:00:00+00:00",
    "name": "ARK API Server",
    "author": "contact@manus.ai",
    "description": "Serveur API Flask pour exécuter les commandes arkmanager sur un serveur ARK. Ce serveur doit être installé sur la même machine que votre serveur ARK avec arkmanager.",
    "features": null,
    "docker_images": {
        "ghcr.io/parkervcp/yolks:python_3.11": "ghcr.io/parkervcp/yolks:python_3.11",
        "ghcr.io/parkervcp/yolks:python_3.10": "ghcr.io/parkervcp/yolks:python_3.10",
        "ghcr.io/parkervcp/yolks:python_3.9": "ghcr.io/parkervcp/yolks:python_3.9"
    },
    "file_denylist": [],
    "startup": "if [[ -d .git ]] && [[ {{AUTO_UPDATE}} == \"1\" ]]; then git pull; fi; if [[ ! -f .env ]]; then echo \"ERREUR: Fichier .env manquant! Copiez .env.example vers .env et configurez-le.\"; exit 1; fi; /usr/local/bin/python ark_api_server.py",
    "config": {
        "files": "{\r\n    \".env\": {\r\n        \"parser\": \"properties\",\r\n        \"find\": {\r\n            \"ARK_API_TOKEN\": \"ARK_API_TOKEN={{server.build.env.ARK_API_TOKEN}}\",\r\n            \"ARK_API_PORT\": \"ARK_API_PORT={{server.build.default.port}}\",\r\n            \"ARKMANAGER_PATH\": \"ARKMANAGER_PATH={{server.build.env.ARKMANAGER_PATH}}\"\r\n        }\r\n    }\r\n}",
        "startup": "{\r\n    \"done\": \"Démarrage du serveur API ARK\"\r\n}",
        "logs": "{}",
        "stop": "^C"
    },
    "scripts": {
        "installation": {
            "script": "#!/bin/bash\n\n# Installation Script\nset -e\n\ncd /mnt/server\n\n# Installer git si nécessaire\nif ! command -v git &> /dev/null; then\n    echo \"Installation de git...\"\n    apt update\n    apt install -y git\nfi\n\n# Cloner le dépôt\nif [ -d \"ark-discord-bot\" ]; then\n    echo \"Le dépôt existe déjà, mise à jour...\"\n    cd ark-discord-bot\n    git pull\nelse\n    echo \"Clonage du dépôt ARK Discord Bot...\"\n    git clone https://github.com/LHRICO78/ark-discord-bot.git\n    cd ark-discord-bot\nfi\n\n# Se placer dans le dossier server\ncd server\n\n# Copier les fichiers au niveau racine du serveur\necho \"Copie des fichiers...\"\ncp ark_api_server.py /mnt/server/\ncp requirements.txt /mnt/server/\ncp .env.example /mnt/server/\n\n# Retour au dossier racine\ncd /mnt/server\n\n# Installer les dépendances Python\necho \"Installation des dépendances Python...\"\nif [ -f requirements.txt ]; then\n    pip install --no-cache-dir --upgrade pip\n    pip install --no-cache-dir -r requirements.txt\nfi\n\n# Créer le fichier .env s'il n'existe pas\nif [ ! -f .env ]; then\n    echo \"Création du fichier .env...\"\n    cp .env.example .env\n    echo \"\"\n    echo \"========================================\"\n    echo \"IMPORTANT: Configurez le fichier .env !\"\n    echo \"========================================\"\n    echo \"Allez dans l'onglet 'Files' et éditez le fichier .env\"\n    echo \"Remplissez les variables:\"\n    echo \"  - ARK_API_TOKEN (générez un token sécurisé)\"\n    echo \"  - ARK_API_PORT (configuré automatiquement)\"\n    echo \"  - ARKMANAGER_PATH (chemin vers arkmanager)\"\n    echo \"========================================\"\nfi\n\necho \"Installation terminée!\"\necho \"ATTENTION: Ce serveur doit avoir accès à arkmanager!\"",
            "container": "ghcr.io/parkervcp/installers:debian",
            "entrypoint": "bash"
        }
    },
    "variables": [
        {
            "name": "ARK API Token",
            "description": "Token d'authentification pour sécuriser l'API. Générez un token fort et unique. Ce token doit être le même que celui configuré dans le bot Discord.",
            "env_variable": "ARK_API_TOKEN",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|min:32",
            "field_type": "text"
        },
        {
            "name": "ARKManager Path",
            "description": "Chemin complet vers l'exécutable arkmanager sur votre système",
            "env_variable": "ARKMANAGER_PATH",
            "default_value": "/usr/local/bin/arkmanager",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string",
            "field_type": "text"
        },
        {
            "name": "Auto Update",
            "description": "Mettre à jour automatiquement le serveur API au démarrage (1 = oui, 0 = non)",
            "env_variable": "AUTO_UPDATE",
            "default_value": "1",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|boolean",
            "field_type": "text"
        }
    ]
}

